<!DOCTYPE html>
<html>

<head>
    <title>DCC++ Mobile Controller</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="bootstrap-toggle.min.css" rel="stylesheet">
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="bootstrap.min.js"></script>
    <script type="text/javascript" src="bootstrap-toggle.min.js"></script>

    <style type="text/css">
           
        .bg-1 {
            background-color: #000000;
            color: #ffffff;
        }
        
        .bg-2 {
            background-color: #4c4e4f;
            color: #ffffff;
            font-size:160%;
        }
        
        .bg-3 {
            background-color: #4c4e4f;
            color: #ffffff;
            font-size:160%;
        }
        
        .bg-4 {
            background-color: #787a7a;
            color: #ffffff;
            font-size:150%;
        }
        
        .bg-5 {
            background-color: #b3b3b3;
            color: #000000;
        }
        
        .container-fluid {
            padding-top: 15px;
            padding-bottom: 15px;
        }

        .btn {
             white-space: normal;
       
        }
 
    </style>
    <script type="text/javascript">
        var ipValue;
        var connection;
        connection.onopen = function() {
            connection.send('ping');

        };
        connection.onerror = function(error) {
            console.log('WebSocket Error ', error);
       
        };

        function NewIP() {
            var text = document.getElementById('ip').value;
            ipValue = text;
            connection = new WebSocket("ws://"+ipValue, ['arduino']);

            console.log("IP value changed to:" + ipValue); <!--Debug - Comment out if not required.-->

        }

        function switch0() {
            if (document.getElementById('Power').checked) {
                var toSend = "ON";
                connection.send(toSend);

                console.log("Power On sent:" + toSend); <!--Debug - Comment out if not required.-->	

            } else {
                var toSend = "OFF";
                connection.send(toSend);

                console.log("Power Off sent:" + toSend); <!--Debug - Comment out if not required.-->
            }
        }

        function switch1() {
            if (document.getElementById('DirT1').checked) {
                var toSend = "FOR";
                connection.send(toSend);

                console.log("Forward T1 sent:"+ toSend); <!--Debug - Comment out if not required.-->

            } else {
                var toSend = "REV";
                connection.send(toSend);

                console.log("Reverse T1 sent:"+ toSend); <!--Debug - Comment out if not required.-->
            }
        }

        function switch2() {
            if (document.getElementById('DirT2').checked) {
                var toSend = "FOR2";
                connection.send(toSend);

                console.log("Forward T2 sent:"+ toSend); <!--Debug - Comment out if not required.-->

            } else {
                var toSend = "REV2";
                connection.send(toSend);

                console.log("Reverse T2 sent:"+ toSend); <!--Debug - Comment out if not required.-->
            }
        }

        function PowerOffRst() {            
            var toSend = "EXIT";
            connection.send(toSend);
            
            console.log("Shut Down sent:" + toSend); <!--Debug - Comment out if not required.-->
            location.reload(true/false);
            
        }

        function Stop1() {
            var toSend = "STOP1";
            connection.send(toSend);
            document.getElementById("inputSliderT1").value = 0;
            document.getElementById("outputTextT1").value = 0;              

            console.log("Stop sent:"+ toSend);
            
        }

         function Stop2() {
            var toSend = "STOP2";
            connection.send(toSend);
            document.getElementById("inputSliderT2").value = 0;
            document.getElementById("outputTextT2").value = 0;              

            console.log("Stop sent:"+ toSend);
            
        }

        function Cabmod1() {
            var text = document.getElementById('Cab1').value;
            var toSend = "CAB1" + text;
            connection.send(toSend);

            console.log("Cab# T1 sent:" + toSend); <!--Debug - Comment out if not required.-->

        }

        function Cabmod2() {
            var text = document.getElementById('Cab2').value;
            var toSend = "CAB2" + text;
            connection.send(toSend);

            console.log("Cab# T2 sent:" + toSend); <!--Debug - Comment out if not required.-->
        }

        function showValueT1(newValue) {
            document.getElementById("outputTextT1").value = newValue;
            connection.send("x" + newValue);
        }

        function showValueT2(newValue) {
            document.getElementById("outputTextT2").value = newValue;
            connection.send("y" + newValue);
        }

        function ClearFn1() {            
            $('#F0a').bootstrapToggle('off');
            $('#F1a').bootstrapToggle('off');
            $('#F2a').bootstrapToggle('off');
            $('#F3a').bootstrapToggle('off');
            $('#F4a').bootstrapToggle('off');
        }

         function ClearFn2() {            
            $('#F0b').bootstrapToggle('off');
            $('#F1b').bootstrapToggle('off');
            $('#F2b').bootstrapToggle('off');
            $('#F3b').bootstrapToggle('off');
            $('#F4b').bootstrapToggle('off');            
        }

        function FnData1() {
            if (document.getElementById('F0a').checked) {
                var  Fn0a = 16;
                
            } else {
                 Fn0a = 0;
        }
             if (document.getElementById('F1a').checked) {
                var  Fn1a = 1;
                
            } else {
                 Fn1a = 0;
        }
             if (document.getElementById('F2a').checked) {
                var  Fn2a = 2;
                
            } else {
                 Fn2a = 0;
        }
             if (document.getElementById('F3a').checked) {
                var  Fn3a = 4;
                
            } else {
                 Fn3a = 0;
        }
             if (document.getElementById('F4a').checked) {
                var  Fn4a = 8;
                
            } else {
                 Fn4a = 0;
        }
            var FnValue1 = +Fn0a + +Fn1a + +Fn2a + +Fn3a + +Fn4a +128;
                connection.send("FnT1" +FnValue1);
                
                console.log("Function T1 sent:" +FnValue1);
        }

         function FnData2() {
            if (document.getElementById('F0b').checked) {
                var  Fn0b = 16;
                
            } else {
                 Fn0b = 0;
        }
             if (document.getElementById('F1b').checked) {
                var  Fn1b = 1;
                
            } else {
                 Fn1b = 0;
        }
             if (document.getElementById('F2b').checked) {
                var  Fn2b = 2;
                
            } else {
                 Fn2b = 0;
        }
             if (document.getElementById('F3b').checked) {
                var  Fn3b = 4;
                
            } else {
                 Fn3b = 0;
        }
             if (document.getElementById('F4b').checked) {
                var  Fn4b = 8;
                
            } else {
                 Fn4b = 0;
        }
            var FnValue2 = +Fn0b + +Fn1b + +Fn2b + +Fn3b + +Fn4b +128;
                connection.send("FnT2" +FnValue2);
                
                console.log("Function T2 sent:" +FnValue2);
        }

    </script>
</head>

<body>
    <div class="container-fluid bg-1 text-center">
        <h3>DCC++ Mobile Controller</h3>
    </div>
    <div class="container-fluid bg-2 text-center">
        <div class="row">
            <div class="col-xs-3">
                <div class="container-fluid">
                    <button class="btn btn-danger btn-lg" type="button" id="toggle-Power" onclick="PowerOffRst()">Master<br>Reset</button>
                </div>
            </div>
            <div class="col-xs-6">
                <div class="container-fluid">
                    <input type="text" class="form-control" placeholder="Server 'IP Address'" id="ip" onchange="NewIP()" style="width:150px;height:35px;"> 
                </div>
            </div
            <div class="col-xs-3">
                <div class="container-fluid">                
            </div>
        </div>
    </div>
    <div class="container-fluid bg-3 text-center">
        <div class="row">
            <div class="col-xs-3">
                <input type="checkbox" data-toggle="toggle" id="Power" name="power" onchange="switch0()" data-size="medium" data-on="Power On" data-off="Power Off" data-onstyle="success" data-offstyle="warning">
            </div>
            <div class="col-xs-4">
                <input type="text" name="Cab1#" placeholder="Cab#" id="Cab1" onchange="Cabmod1()" style="background-color:#000000;width:70px;height:35px;">
            </div>
            <div class="col-xs-2">
                <button class="btn btn-danger btn-md" type="button" id="stop1" onclick="Stop1()">STOP</button> 
            </div>
            <div class="col-xs-3">              
                <input type="checkbox" data-toggle="toggle" id="DirT1" onchange="switch1()" data-size="medium" checked data-on="F>>" data-off="R<<" data-offstyle="danger" data-onstyle="success">
            </div>
        </div>
    </div>
    <div class="container-fluid bg-4 text-center">
        <div class="row">
            <div class="col-xs-12">
                <div class="container">
                    <input type="range" id="inputSliderT1" min="0" max="126" value="0" step="1" onchange="showValueT1(this.value)" style="height:40px;">
                    <input type="text" id="outputTextT1" value="0" style="background-color:#787a7a;width:40px;height:30px;">Throttle 1
                    <p></p>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid bg-3 text-center">
        <div class="row">
            <div class="col-xs-3"></div>
            <div class="col-xs-4">
                <input type="text" name="Cab2#" placeholder="Cab#" id="Cab2" onchange="Cabmod2()" style="background-color:#000000;width:70px;height:35px;">
            </div>
            <div class="col-xs-2">
                <button class="btn btn-danger btn-md" type="button" id="stop2" onclick="Stop2()">STOP</button> 
            </div>
            <div class="col-xs-3">
                <input type="checkbox" data-toggle="toggle" id="DirT2" onchange="switch2()" data-size="medium" checked data-on="F>>" data-off="R<<" data-offstyle="danger" data-onstyle="success">
            </div>
        </div>
    </div>
    <div class="container-fluid bg-4 text-center">
        <div class="row">
            <div class="col-xs-12">
                <div class="container">
                    <input type="range" id="inputSliderT2" min="0" max="126" value="0" step="1" onchange="showValueT2(this.value)" style="height:40px;">
                    <input type="text" id="outputTextT2" value="0" style="background-color:#787a7a;width:40px;height:30px;">Throttle 2
                    <p></p>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid bg-5 text-center">
        <div class="row">
            <div class="col-xs-2">
                <div class="container-fluid">
                    <input type="checkbox" data-toggle="toggle" id="F0a" onchange="FnData1()" data-size="small" data-on="On" data-off="Off" data-offstyle="default" data-onstyle="info"> F0<p></p>
                </div>
            </div>
            <div class="col-xs-2">
                <div class="container-fluid">
                     <input type="checkbox" data-toggle="toggle" id="F1a" onchange="FnData1()" data-size="small" data-on="On" data-off="Off" data-offstyle="default" data-onstyle="info"> F1<p></p>
                </div>
            </div>
            <div class="col-xs-2">
                <div class="container-fluid">
                     <input type="checkbox" data-toggle="toggle" id="F2a" onchange="FnData1()" data-size="small" data-on="On" data-off="Off" data-offstyle="default" data-onstyle="info"> F2<p></p>
                </div>
            </div>
            <div class="col-xs-2">
                <div class="container-fluid">
                     <input type="checkbox" data-toggle="toggle" id="F3a" onchange="FnData1()" data-size="small" data-on="On" data-off="Off" data-offstyle="default" data-onstyle="info"> F3<p></p>
                </div>
            </div>
            <div class="col-xs-2">
                <div class="container-fluid">
                     <input type="checkbox" data-toggle="toggle" id="F4a" onchange="FnData1()" data-size="small" data-on="On" data-off="Off" data-offstyle="default" data-onstyle="info"> F4<p></p>
                </div>
             </div>
             <div class="col-xs-2">
                <div class="container-fluid">
                    <button class="btn btn-primary btn-sm" id="clear2" onclick="FnData1()" type="button">RSd</button>T1<p></p>
                </div>
             </div>   
        </div>
    </div>
    <div class="container-fluid bg-5 text-center">
        <div class="row">
            <div class="col-xs-2">
                <div class="container-fluid">
                    <input type="checkbox" data-toggle="toggle" id="F0b" onchange="FnData2()" data-size="small" data-on="On" data-off="Off" data-offstyle="default" data-onstyle="info"> F0<p></p>
                </div>
            </div>
            <div class="col-xs-2">
                <div class="container-fluid">
                     <input type="checkbox" data-toggle="toggle" id="F1b" onchange="FnData2()" data-size="small" data-on="On" data-off="Off" data-offstyle="default" data-onstyle="info"> F1<p></p>
                </div>
            </div>
            <div class="col-xs-2">
                <div class="container-fluid">
                     <input type="checkbox" data-toggle="toggle" id="F2b" onchange="FnData2()" data-size="small" data-on="On" data-off="Off" data-offstyle="default" data-onstyle="info"> F2<p></p>
                </div>
            </div>
            <div class="col-xs-2">
                <div class="container-fluid">
                     <input type="checkbox" data-toggle="toggle" id="F3b" onchange="FnData2()" data-size="small" data-on="On" data-off="Off" data-offstyle="default" data-onstyle="info"> F3<p></p>
                </div>
            </div>
            <div class="col-xs-2">
                <div class="container-fluid">
                     <input type="checkbox" data-toggle="toggle" id="F4b" onchange="FnData2()" data-size="small" data-on="On" data-off="Off" data-offstyle="default" data-onstyle="info"> F4<p></p>
                </div>
             </div>
             <div class="col-xs-2">
                <div class="container-fluid">
                    <button class="btn btn-primary btn-sm" id="clear2" onclick="FnData2()" type="button">RSd</button>T2<p></p>
                </div>
             </div>   
        </div>
    </div>
</div>
<footer class="container-fluid bg-1 text-center">
  <p>HTML by S Lowry (indev2) 2016. Licence - Free.</p><!--Libraries - Refer to relevent Developers.--> 
</footer>

</body>

</html>